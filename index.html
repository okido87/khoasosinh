<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>K·∫øt n·ªëi GitHub Pages ‚Üî Apps Script</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
    }
    h1 { color: #2563eb; }
    button {
      padding: 10px 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      background: #2563eb;
      color: #fff;
      cursor: pointer;
      margin: 6px 0;
    }
    button:hover { background: #1e40af; }
    pre {
      background: #f3f4f6;
      padding: 12px;
      border-radius: 8px;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    label { display:block; margin:8px 0 4px; }
    input { padding: 8px; border-radius: 6px; border:1px solid #ccc; width: 100%; }
  </style>
</head>
<body>
  <h1>GitHub Pages g·ªçi Apps Script API</h1>

  <section>
    <h2>1. Ki·ªÉm tra tr·∫°ng th√°i (GET)</h2>
    <button id="btnPing">Ping API</button>
    <pre id="pingResult">Ch∆∞a g·ªçi...</pre>
  </section>

  <section>
    <h2>2. L·∫•y danh s√°ch (GET action=list)</h2>
    <button id="btnList">L·∫•y danh s√°ch</button>
    <pre id="listResult">Ch∆∞a g·ªçi...</pre>
  </section>

  <section>
    <h2>3. G·ª≠i d·ªØ li·ªáu (POST)</h2>
    <form id="postForm">
      <label>H·ªç t√™n</label>
      <input id="name" placeholder="Nguy·ªÖn VƒÉn A" required>
      <label>S·ªë ti·ªÅn</label>
      <input id="amount" type="number" placeholder="100000" required>
      <button type="submit">G·ª≠i</button>
    </form>
    <pre id="postResult">Ch∆∞a g·ª≠i...</pre>
  </section>

  <script>
    // üëâ Thay link n√†y b·∫±ng URL Web App c·ªßa b·∫°n (d·∫°ng .../exec)
    const GAS_URL = "https://script.google.com/macros/s/AKfycbzpUJj5sv9ODsbOkFWzlr7UtRqZs9eZESl1DMh02JgNCWzMpb5uyhUx7S5DbLiUcAyg/exec";

    const qs = (id) => document.querySelector(id);

    // 1) Ping API
    qs("#btnPing").addEventListener("click", async () => {
      try {
        const res = await fetch(GAS_URL + "?action=ping");
        const data = await res.json();
        qs("#pingResult").textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        qs("#pingResult").textContent = "‚ùå L·ªói: " + err;
      }
    });

    // 2) L·∫•y list
    qs("#btnList").addEventListener("click", async () => {
      try {
        const res = await fetch(GAS_URL + "?action=list");
        const data = await res.json();
        qs("#listResult").textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        qs("#listResult").textContent = "‚ùå L·ªói: " + err;
      }
    });

    // 3) G·ª≠i POST JSON
    qs("#postForm").addEventListener("submit", async (ev) => {
      ev.preventDefault();
      const payload = {
        name: qs("#name").value.trim(),
        amount: Number(qs("#amount").value || 0),
      };
      try {
        const res = await fetch(GAS_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });
        const data = await res.json();
        qs("#postResult").textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        qs("#postResult").textContent = "‚ùå L·ªói: " + err;
      }
    });
  </script>
</body>
</html>
